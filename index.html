<html>
<head>
    <meta charset="UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1" />    <!-- auto width to screen -->
    <title>青年快速学习</title>
    <style>
        .empty-black {
            background-color: rgb(0,0,0);
            display: flex;
            vertical-align: middle;
            height: 100%;
            width: 100%;
        }
    </style>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"></script> 
    <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    </head>
<body>
<div class="container" id="topcontainer">
    <div class="page-header">
        <h1>大学习链接：</h1>
    </div>
    <div class="input-group col-md-10 col-md-offset-1">
        <div class="form-group">
            <div class="col-xs-4">
                <input type="number" class="form-control" id="year" placeholder="年份">
            </div>
            <label for="year" class="col-xs-2 control-label">年第</label>
            <div class="col-xs-4">
                <input type="number" class="form-control" id="number" placeholder="多少">
            </div>
            <label for="year" class="col-xs-2 control-label">期</label>
        </div>
        <div class="form-group">
            <input type="text" class="col-sm-10 form-control" placeholder="请输入大学习链接" id="xxlink">
            <span class="input-group-btn col-sm-2">
                <button id="do_study" type="button" class="btn btn-primary">快速学习！</button>
        </div>
    </span>
    </div>
    <script>
        $(document).ready(function() {
            $("#year").val(new Date().getFullYear());
        });
        $("#do_study").click(function (e) {
            var url = $("#xxlink").val();
            console.log("Original URL is " + url);

            let imgurl = url.slice(0, url.lastIndexOf('/')) + "/images/end.jpg";
            console.log("Image URL is " + imgurl);

            document.title = "\"青年大学习\"" + $("#year").val() + "年第" + $("#number").val() + "期";

            $("#topcontainer").empty();
            $("#topcontainer").attr('class', 'empty-black');
            $("<img width='100%' height='100%' src='" + imgurl + "' style='margin: auto;'/>").appendTo("#topcontainer");

            //$.ajax({
            //    url: url,
            //    success: function (responseHtml) {
            //        var newTitle = $(responseHtml).filter('title').text();
            //        document.title = newTitle;
            //    },
            //    error: function () {
            //        alert("无法打开链接" + url);
            //    }
            //});
        });
    </script>
</div>
</body>
</html>
